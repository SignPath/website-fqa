<!-- last_modified_at:  --><!DOCTYPE html>
<html lang="en" data-appurl='https://fqa.test.signpath.io'>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href='https://signpath.github.io/website-staging//documentation/artifact-configuration' />
  <!-- Begin Jekyll SEO tag v2.6.1 -->
  <link rel='preload' as='style' href='/assets/css/line-awesome.min.css' onload="this.rel='stylesheet'">
  <title>Documentation - Artifact Configuration | SignPath</title>
  <meta property="og:title" content="Documentation - Artifact Configuration | SignPath" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:description" content="SignPath.io - Automated, repeatable and secure code signing processes
  in the cloud and on-premises" />
  <meta property="og:url" content="https://signpath.github.io/website-staging//documentation/artifact-configuration" />
  <meta property="og:site_name" content="SignPath - Code Signing Simple and Secure" />
  <meta name="description" content="SignPath.io - Automated, repeatable and secure code signing processes
  in the cloud and on-premises"/>
  <!-- End Jekyll SEO tag -->
  <link rel='stylesheet' href='/assets/css/hint.min.css'>
  <link rel="stylesheet" href="/assets/css/index.css?cache=2023-11-17">
  <link rel="alternate" type="application/atom+xml" title="SignPath.io Blog" href="/feed.xml">
  <script src='/assets/index.js?cache=2023-11-17'></script>
  <script src='/assets/js/main-bundle.js?cache=2023-11-17'></script><link rel="icon" href="/assets/favicon-50x50.png" sizes="32x32">
  <link rel="icon" href="/assets/favicon.png" sizes="192x192">
  <link rel="apple-touch-icon-precomposed" href="/assets/favicon.png">
  <meta name="msapplication-TileImage" content="/assets/favicon.png">
</head>
<body>
  <header>
    <div>
      <a href='/'><img src='/assets/signpath-logo-white.svg' width="181" height="36" alt='SignPath'></a>
      <nav>
        <ul><li>
              <a href='/product'> Product </a>
              <ul><li> <a href='/product/features'> Features </a> </li><li> <a href='/product/editions'> Editions </a> </li><li class='separator' /><li> <a href='/product/devops'> For DevOps teams </a> </li><li> <a href='/product/infosec'> For InfoSec teams </a> </li><li> <a href='/product/open-source'> For Open Source projects </a> </li><li class='separator' /><li> <a href='/product/office-macros'> Office macro signing </a> </li><li> <a href='/product/pkic-best-practices'> PKI Consortium best practices </a> </li></ul>
            </li><li>
              <a href='/code-signing'> Code Signing </a>
              <ul><li> <a href='/code-signing/introduction'> Introduction </a> </li><li> <a href='/code-signing/theory'> Theory </a> </li><li> <a href='/code-signing/windows-platform'> Windows Platform </a> </li><li> <a href='/code-signing/test-certificates'> Managing Test Certificates </a> </li><li> <a href='/code-signing/private-keys'> Storage of Private Keys </a> </li><li> <a href='/code-signing/media-coverage'> Media Coverage </a> </li></ul>
            </li><li>
              <a href='/documentation'> Documentation </a>
              <ul><li> <a href='/documentation/getting-started'> Getting Started </a> </li><li> <a href='/documentation/managing-certificates'> Managing Certificates </a> </li><li> <a href='/documentation/users'> Managing Users </a> </li><li> <a href='/documentation/projects'> Setting up Projects </a> </li><li> <a href='/documentation/signing-code'> Signing Code </a> </li><li> <a href='/documentation/signing-containers'> Signing Container Images </a> </li><li class='separator' /><li> <a href='/documentation/artifact-configuration'> Artifact Configuration </a> </li><li> <a href='/documentation/build-system-integration'> Build System Integration </a> </li><li> <a href='/documentation/trusted-build-systems'> Trusted Build Systems </a> </li><li> <a href='/documentation/origin-verification'> Origin Verification </a> </li><li class='separator' /><li> <a href='/documentation/powershell'> PowerShell cmdlets </a> </li><li class='separator' /><li> <a href='/documentation/changelog'> Product updates </a> </li></ul>
            </li><li>
              <a href='/about-us'> About us </a>
              <ul><li> <a href='/company'> Company </a> </li><li> <a href='/blog'> Blog </a> </li><li> <a href='/jobs'> Jobs </a> </li><li> <a href='/contact'> Contact </a> </li></ul>
            </li><li class='login'><a class='btn btn-flat' href='https://fqa.test.signpath.io/Web/Home/Login'>Login</a>
          <li class='login'><a href='https://fqa.test.signpath.io/Web/Subscription/StartFreeTrial' class='btn btn-primary trial'>Start free trial</a></li>
          </li>
        </ul>
        <a id='main-menu-toggle' href='#' onclick='document.querySelector("header > div > nav > ul").classList.toggle("open")'>
          <div></div>
          <div></div>
          <div></div>
        </a>
      </nav>
    </div>
  </header>
  <main><section class="bg-blue font-white top-section">
	<div>
		<h1><span class='no-break'>Documentation &nbsp;❯&nbsp; </span> Artifact Configuration</h1>
	</div>
</section>
<section class="resources-section">
	<div><aside>
				<ul><li class=''>
							<a href='/documentation/getting-started#'>Getting Started</a></li><li class=''>
							<a href='/documentation/managing-certificates#'>Managing Certificates</a></li><li class=''>
							<a href='/documentation/users#'>Managing Users</a></li><li class=''>
							<a href='/documentation/projects#'>Setting up Projects</a></li><li class=''>
							<a href='/documentation/signing-code#'>Signing Code</a></li><li class=''>
							<a href='/documentation/signing-containers#'>Signing Container Images</a></li><li class='separator' /><li class='active'>
							<a href='/documentation/artifact-configuration#'>Artifact Configuration</a><div class="no-mobile" ><ul>
  <li><a href="#abstract">Abstract</a></li>
  <li><a href="#creating-and-editing-artifact-configurations">Creating and editing artifact configurations</a></li>
  <li><a href="#containers">Containers: defining file and directory structure</a></li>
  <li><a href="#deep-signing-containers">Deep signing containers</a></li>
  <li><a href="#file-elements">File elements</a></li>
  <li><a href="#directory-element">&lt;directory&gt; element</a></li>
  <li><a href="#signing-methods">Signing methods</a></li>
  <li><a href="#using-wildcards">Using wildcards</a></li>
  <li><a href="#file-and-directory-sets">File and directory sets</a></li>
  <li><a href="#metadata-restrictions">File metadata restrictions</a></li>
  <li><a href="#user-defined-parameters">User-defined parameters</a></li>
  <li><a href="#examples">Examples</a></li>
</ul>
</div></li><li class=''>
							<a href='/documentation/build-system-integration#'>Build System Integration</a></li><li class=''>
							<a href='/documentation/trusted-build-systems#'>Trusted Build Systems</a></li><li class=''>
							<a href='/documentation/origin-verification#'>Origin Verification</a></li><li class='separator' /><li class=''>
							<a href='/documentation/powershell#'>PowerShell cmdlets</a></li><li class='separator' /><li class=''>
							<a href='/documentation/changelog#'>Product updates</a></li></ul>
			</aside><article><ul class="article-toc">
  <li><a href="#abstract">Abstract</a></li>
  <li><a href="#creating-and-editing-artifact-configurations">Creating and editing artifact configurations</a>
    <ul>
      <li><a href="#upload-an-artifact-sample">Upload an artifact sample</a></li>
      <li><a href="#create-an-artifact-configuration">Create an artifact configuration</a></li>
      <li><a href="#edit-an-artifact-configuration">Edit an artifact configuration</a></li>
    </ul>
  </li>
  <li><a href="#containers">Containers: defining file and directory structure</a></li>
  <li><a href="#deep-signing-containers">Deep signing containers</a>
    <ul>
      <li><a href="#platform-considerations">Platform considerations</a></li>
    </ul>
  </li>
  <li><a href="#file-elements">File elements</a>
    <ul>
      <li><a href="#file-element-types-and-signing-directives">File element types and signing directives</a></li>
      <li><a href="#file-element-examples">File element examples</a></li>
      <li><a href="#signing-multiple-artifacts">Signing multiple artifacts</a></li>
    </ul>
  </li>
  <li><a href="#directory-element">&lt;directory&gt; element</a>
    <ul>
      <li><a href="#directory-example">&lt;directory&gt; example</a></li>
    </ul>
  </li>
  <li><a href="#signing-methods">Signing methods</a>
    <ul>
      <li><a href="#authenticode-sign">&lt;authenticode-sign&gt;</a></li>
      <li><a href="#clickonce-sign">&lt;clickonce-sign&gt;</a></li>
      <li><a href="#nuget-sign">&lt;nuget-sign&gt;</a></li>
      <li><a href="#office-macro-sign">&lt;office-macro-sign&gt;</a></li>
      <li><a href="#opc-sign">&lt;opc-sign&gt;</a></li>
      <li><a href="#jar-sign">&lt;jar-sign&gt;</a></li>
      <li><a href="#xml-sign">&lt;xml-sign&gt;</a></li>
      <li><a href="#detached-raw-signatures">Detached raw signatures using &lt;create-raw-signature&gt;</a></li>
    </ul>
  </li>
  <li><a href="#using-wildcards">Using wildcards</a>
    <ul>
      <li><a href="#number-of-matches">Number of matches</a></li>
    </ul>
  </li>
  <li><a href="#file-and-directory-sets">File and directory sets</a>
    <ul>
      <li><a href="#file-set-example">File set example</a></li>
    </ul>
  </li>
  <li><a href="#metadata-restrictions">File metadata restrictions</a>
    <ul>
      <li><a href="#example-pe-file-metadata-restriction">Example: PE file metadata restriction</a></li>
      <li><a href="#sbom-sample">Example: XML file schema restriction for CycloneDX SBOM</a></li>
    </ul>
  </li>
  <li><a href="#user-defined-parameters">User-defined parameters</a></li>
  <li><a href="#examples">Examples</a>
    <ul>
      <li><a href="#predefined-configuration-for-single-portable-executable-file">Predefined configuration for single Portable Executable file</a></li>
      <li><a href="#signing-multiple-artifacts-in-a-zip-container">Signing multiple artifacts in a ZIP container</a></li>
      <li><a href="#msi-sample">Deep-signing an MSI installer</a></li>
      <li><a href="#signing-similar-directories-within-an-msi-file">Signing similar directories within an MSI file</a></li>
    </ul>
  </li>
</ul>
<h2 id="abstract">Abstract</h2>

<p>The artifact configuration describes the structure of the artifacts you want to sign. For simple artifacts, you can use predefined configurations to get started quickly. For signing several artifacts together, and for more complex artifacts, specify the structure of your artifact and provide signing directives using XML.</p>

<p><img src="/assets/img/resources/documentation_artifact-configuration.png" alt="Artifact configuration XML" /></p>

<h2 id="creating-and-editing-artifact-configurations">Creating and editing artifact configurations</h2>

<h3 id="upload-an-artifact-sample">Upload an artifact sample</h3>

<p>Before you start creating an artifact configuration from scratch, we recommend that you upload an artifact sample first. SignPath will then analyze your sample and look for nested artifacts that can be signed.</p>

<p>For non-trivial artifacts, you may want to edit the resulting artifact configuration:</p>

<ul>
  <li>It may contain signing instructions for files that you do not want to sign, such as third-party components.</li>
  <li>It may contain fixed strings, such as version numbers, that you want to replace with <a href="#using-wildcards">wildcards</a>.</li>
  <li>It may have very similar sections that you want to unify using <a href="#directory-element"><code class="language-plaintext highlighter-rouge">&lt;directory&gt;</code></a> elements and wildcards (<a href="#signing-similar-directories-within-an-msi-file">example</a>).</li>
</ul>

<h3 id="create-an-artifact-configuration">Create an artifact configuration</h3>

<p>When you create a new project, a default artifact configuration will be added. To create additional artifact configurations, select the project and click <strong>Add</strong> in the <strong>Artifact Configurations</strong> section. In either case, you can</p>

<ul>
  <li>select <strong>Upload an artifact sample</strong> and select an artifact file to have the artifact configuration generated</li>
  <li>select a <strong>Ready to use artifact configuration</strong></li>
  <li>select one of the <strong>Templates for custom artifact configurations</strong> and edit the XML content</li>
  <li>select <strong>Custom</strong> and create an artifact configuration from scratch</li>
</ul>

<h3 id="edit-an-artifact-configuration">Edit an artifact configuration</h3>

<p>To modify an existing artifact configuration, select a project, then select the artifact configuration you want to change, and then either</p>

<ul>
  <li>select <strong>Edit</strong> to select pre-defined artifact configurations or edit the XML content</li>
  <li>select <strong>Update from an artifact sample</strong> to generate your artifact configuration from a sample file</li>
</ul>

<p>When you edit XML content in place, a graphical representation will be rendered immediately. If you prefer to use code completion, select <strong>Download XML schema</strong> and use a schema-aware XML editor, such as Microsoft Visual Studio.</p>

<p>Read more about projects and artifact configurations in <a href="/documentation/projects">Setting up Projects</a>.</p>

<h2 id="containers">Containers: defining file and directory structure</h2>

<p>Every XML description is wrapped in an <code class="language-plaintext highlighter-rouge">&lt;artifact-configuration&gt;</code> root element which contains exactly one file element. This file element specifies the type of artifact and signing method. Optionally, you can restrict the name of the file using the <code class="language-plaintext highlighter-rouge">path</code> attribute.</p>

<p>Container-format elements may contain other file elements for deep signing. Every <em>container</em> format can contain multiple other <em>file</em> or <em>directory</em> elements to be signed. Each of those will be extracted, signed, and then put back into the container during the signing process. All inner elements need a <code class="language-plaintext highlighter-rouge">path</code> attribute.</p>

<h2 id="deep-signing-containers">Deep signing containers</h2>

<p>Sometimes you need to sign both the container and its contents. For instance, an MSI installer package needs to be signed, but you also want the files it installs to be signed. SignPath can sign both the container and its contents in a single pass if you specify an appropriate artifact configuration. See <a href="#msi-sample">here</a> for an example.</p>

<h3 id="platform-considerations">Platform considerations</h3>

<p>File and directory names in <code class="language-plaintext highlighter-rouge">path</code> attributes are case-insensitive. You may use slash <code class="language-plaintext highlighter-rouge">/</code> or backslash <code class="language-plaintext highlighter-rouge">\</code> as directory separators.</p>

<h2 id="file-elements">File elements</h2>

<h3 id="file-element-types-and-signing-directives">File element types and signing directives</h3>
<table>
    <thead>
        <tr><th style="width: 9em;">

Element 
</th><th>

<a href="#containers">Container format</a> 
</th><th style="width: 10em;">

Signing directive 
</th><th>

Extensions 
</th><th>

Description 
</th></tr>
    </thead>
    <tbody><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;pe-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.exe, .dll, .acm, .ax, .cpl, .drv, .efi, .mui, .ocx, .scr, .sys, .tsp</p>
      </td><td>

        <p>Portable Executable (PE) files: EXE, DLL, and other executable files</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;powershell-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.ps1, .psm1, psd1, .psdc1, .ps1xml</p>
      </td><td>

        <p>PowerShell scripts and modules</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;windows-script-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.wsf, ,vbs, .js</p>
      </td><td>

        <p>Windows scripts for Windows Scripting Host, typically VBScript and JScript<sup id="fnref:jscript" role="doc-noteref"><a href="#fn:jscript" class="footnote" rel="footnote">1</a></sup>. (Not available for Starter subscriptions.)</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;msi-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.msi, .msm, .msp</p>
      </td><td>

        <p>Microsoft installer files</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;cab-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.cab</p>
      </td><td>

        <p>Windows cabinet files</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;catalog-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.cat</p>
      </td><td>

        <p>Windows catalog files</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;appx-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.appx, .appxbundle</p>
      </td><td>

        <p>App packages for Microsoft Store/Universal Windows Platform<br /> <span style="font-family: 'Line Awesome Free'; font-weight: 800;"></span>  The Common Name of the code signing certificate must match the <code class="language-plaintext highlighter-rouge">PublisherDisplayName</code> in the <code class="language-plaintext highlighter-rouge">AppxManifest.xml</code> file.</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;msix-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#authenticode-sign"><code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code></a></p>
      </td><td>

        <p>.msix, .msixbundle</p>
      </td><td>

        <p>MSIX installer app packages for Microsoft Windows</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;opc-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#opc-sign"><code class="language-plaintext highlighter-rouge">&lt;opc-sign&gt;</code></a></p>
      </td><td>

        <p>.vsix, .xps, hlkx, …</p>
      </td><td>

        <p>Open Packaging Conventions (OPC) files including Visual Studio Extensions (VSIX) and Hardware Lab Kit driver signing packages.  (Driver signing not available for Starter subscriptions.)</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;nupkg-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#nuget-sign"><code class="language-plaintext highlighter-rouge">&lt;nuget-sign&gt;</code></a></p>
      </td><td>

        <p>.nupkg</p>
      </td><td>

        <p>NuGet packages</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;jar-file&gt;</code></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#jar-sign"><code class="language-plaintext highlighter-rouge">&lt;jar-sign&gt;</code></a></p>
      </td><td>

        <p>.jar, .war, .ear, .apk, .aab</p>
      </td><td>

        <p>Java archives and Android apps. (Not available for Starter subscriptions.)</p>
      </td></tr><tr><td>

        <p><a href="#zip-file-element"><code class="language-plaintext highlighter-rouge">&lt;zip-file&gt;</code></a></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#jar-sign"><code class="language-plaintext highlighter-rouge">&lt;jar-sign&gt;</code></a></p>
      </td><td>

        <p>.zip</p>
      </td><td>

        <p>Use ZIP archives to sign multiple files at once. (ZIP archives can also be signed and verified using the <a href="#jar-sign">JAR format</a></p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;office-oxml-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#office-macro-sign"><code class="language-plaintext highlighter-rouge">&lt;office-macro-sign&gt;</code></a></p>
      </td><td>

        <p>.xlsm, .xltm, .docm, .dotm, .pptm, .potm, .vsdm, vstm, …</p>
      </td><td>

        <p>Sign VBA macros in Microsoft Office Open XML files and templates: Excel, Word, PowerPoint and Visio (available for Enterprise subscriptions)</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;office-binary-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#office-macro-sign"><code class="language-plaintext highlighter-rouge">&lt;office-macro-sign&gt;</code></a></p>
      </td><td>

        <p>.xls, .xlt, .doc, .dot, .pot, .ppa, .pps, .ppt, .mpp, .mpt, .pub, .vsd, .vst, …</p>
      </td><td>

        <p>Sign VBA macros in binary Microsoft Office files and templates: Project, Publisher, and legacy Excel, Word, PowerPoint and Visio (available for Enterprise subscriptions)</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;xml-file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#xml-sign"><code class="language-plaintext highlighter-rouge">&lt;xml-sign&gt;</code></a></p>
      </td><td>

        <p>.xml</p>
      </td><td>

        <p>Use this directive to sign XML files using <a href="https://www.w3.org/TR/xmldsig-core1/">XMLDSIG</a> (available for Enterprise subscriptions)</p>
      </td></tr><tr><td>

        <p><a href="#directory-element"><code class="language-plaintext highlighter-rouge">&lt;directory&gt;</code></a></p>
      </td><td>

        <p>Yes</p>
      </td><td>

        <p><a href="#clickonce-sign"><code class="language-plaintext highlighter-rouge">&lt;clickonce-sign&gt;</code></a></p>
      </td><td>

      </td><td>

        <p>Directories within container files. This directive is primarily used to structure further elements within containers, e.g. ZIP, MSI, or other directories. It can also be used to sign ClickOnce files.</p>
      </td></tr><tr><td>

        <p><code class="language-plaintext highlighter-rouge">&lt;file&gt;</code></p>
      </td><td>

        <p>No</p>
      </td><td>

        <p><a href="#detached-raw-signatures"><code class="language-plaintext highlighter-rouge">&lt;create-raw-signature&gt;</code></a></p>
      </td><td>

      </td><td>

        <p>Arbitrary files. This directive will create a <a href="#detached-raw-signatures">detached raw signature</a> file (available for Enterprise subscriptions)</p>
      </td></tr></tbody>
</table>
<h3 id="file-element-examples">File element examples</h3>

<h4 id="signing-an-msi-package">Signing an MSI package</h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;msi-file&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/msi-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<p>See <a href="#examples">Examples</a> for more complex artifact configurations.</p>

<h3 id="signing-multiple-artifacts">Signing multiple artifacts</h3>

<p>If you want to sign multiple independent artifacts in one step, you need to package them into an archive before processing.</p>

<p>You can combine signing multiple artifacts with deep signing.</p>

<h4 id="zip-file-element">&lt;zip-file&gt;</h4>

<p>Use the <code class="language-plaintext highlighter-rouge">&lt;zip-file&gt;</code> element to specify a ZIP archive. SignPath will process archives inside this file.</p>

<p>You can also use the <a href="#jar-sign"><code class="language-plaintext highlighter-rouge">&lt;jar-sign&gt;</code></a> directive to sign entire ZIP archives for verification with <code class="language-plaintext highlighter-rouge">jarsigner</code>.</p>

<h5 id="select-multiple-files">Select multiple files</h5>

<p>When used as a root element, you can set the <code class="language-plaintext highlighter-rouge">ui-multifile-upload</code> attribute to <code class="language-plaintext highlighter-rouge">on</code>.</p>

<p>In this case, the Web application will allow selection of multiple artifacts for the <em>submit signing request</em> feature:</p>

<ul>
  <li>The user can select multiple files in the artifact browse dialog</li>
  <li>A ZIP archive named <code class="language-plaintext highlighter-rouge">bundle.zip</code> will automatically be created (even if only a single file is selected)</li>
</ul>

<p>The result will still be provided as a ZIP archive dowload.</p>

<p>Example:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;zip-file</span> <span class="na">ui-multifile-upload=</span><span class="s">"on"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;office-oxml-file</span> <span class="na">path=</span><span class="s">"*.xlsm"</span> <span class="na">max-matches=</span><span class="s">"unbounded"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;office-macro-sign/&gt;</span>
    <span class="nt">&lt;/office-oxml-file&gt;</span>
  <span class="nt">&lt;/zip-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h2 id="directory-element">&lt;directory&gt; element</h2>

<p>All supported container formats have an internal directory structure. You can see this structure if you extract a container to a local disk.</p>

<p>You can either specify these directories in the <code class="language-plaintext highlighter-rouge">path</code> attribute of each file element or nest these file elements within <code class="language-plaintext highlighter-rouge">&lt;directory&gt;</code> elements.</p>

<p><code class="language-plaintext highlighter-rouge">&lt;directory&gt;</code> elements are also used for <a href="#clickonce-sign">ClickOnce signing</a>.</p>

<h3 id="directory-example">&lt;directory&gt; example</h3>
<table>
    <thead>
        <tr><th>

The following fragment 
</th><th>

is equivalent to 
</th></tr>
    </thead>
    <tbody><tr><td>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;zip-file&gt;</span> 
  <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"bin/program.exe"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/pe-file&gt;</span>
<span class="nt">&lt;/zip-file&gt;</span>
</code></pre></div>        </div>

      </td><td>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;zip-file&gt;</span>
  <span class="nt">&lt;directory</span> <span class="na">path=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"program.exe"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authenticode-sign/&gt;</span>
    <span class="nt">&lt;/pe-file&gt;</span>
  <span class="nt">&lt;/directory&gt;</span>
<span class="nt">&lt;/zip-file&gt;</span>
</code></pre></div>        </div>

      </td></tr></tbody>
</table>
<h2 id="signing-methods">Signing methods</h2>

<!-- markdownlint-disable MD026 no trailing punctuation -->

<p>Specify signing directives in file and directory elements. See <a href="#file-elements">file elements</a> for available methods per element type.</p>

<p>For file and directory sets, specify the signing directive in the <code class="language-plaintext highlighter-rouge">&lt;for-each&gt;</code> element.</p>

<h3 id="authenticode-sign">&lt;authenticode-sign&gt;</h3>

<p>Microsoft Authenticode is the primary signing method on the Windows platform. Authenticode is a versatile and extensible mechanism that works for many different file types:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Portable_Executable">Portable Executable</a> (PE) files: EXE, DLL, and some other executable file formats including device drivers</li>
  <li>Installation formats: AppX, MSI, and CAB</li>
  <li>PowerShell scripts and modules</li>
</ul>

<p>Using <code class="language-plaintext highlighter-rouge">&lt;authenticode-sign&gt;</code> is equivalent to using Microsoft’s <code class="language-plaintext highlighter-rouge">SignTool.exe</code>.</p>

<p>See also:</p>

<ul>
  <li>Use <a href="#file-metadata-restrictions">metadata restrictions</a> for <code class="language-plaintext highlighter-rouge">&lt;pe-file&gt;</code> to restrict product name and version.</li>
</ul>

<h3 id="clickonce-sign">&lt;clickonce-sign&gt;</h3>

<p>ClickOnce signing, also called ‘manifest signing’, is a method used for ClickOnce applications and Microsoft Office Add-ins.</p>

<p>ClickOnce signing applies to directories, not to individual files. Therefore, you need to specify a <code class="language-plaintext highlighter-rouge">&lt;directory&gt;</code> element for this method. If you want to sign files in the root directory of a container, specify <code class="language-plaintext highlighter-rouge">path="."</code>.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;zip-file&gt;</span>
    <span class="nt">&lt;directory</span> <span class="na">path=</span><span class="s">"."</span><span class="nt">&gt;</span>
      <span class="nt">&lt;clickonce-sign/&gt;</span>
    <span class="nt">&lt;/directory&gt;</span>
  <span class="nt">&lt;/zip-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<p>Using <code class="language-plaintext highlighter-rouge">&lt;clickonce-sign&gt;</code> is equivalent to using Microsoft’s <code class="language-plaintext highlighter-rouge">mage.exe</code>.</p>

<h3 id="nuget-sign">&lt;nuget-sign&gt;</h3>

<p>NuGet package signing is currently being introduced to the <a href="https://www.nuget.org/">NuGet Gallery</a>.</p>

<p>Although the NuGet Package format is based on OPC (see next section), it uses its own specific signing format.</p>

<p>Using <code class="language-plaintext highlighter-rouge">&lt;nuget-sign&gt;</code> is equivalent to using Microsoft’s <code class="language-plaintext highlighter-rouge">nuget</code> <code class="language-plaintext highlighter-rouge">sign</code> command.</p>

<h3 id="office-macro-sign">&lt;office-macro-sign&gt;</h3>

<p class="badge icon-signpath">Available for Enterprise subscriptions</p>

<p>Use this directive to sign Visual Basic for Applications (VBA) macros in Microsoft Office files.</p>

<p>Use <code class="language-plaintext highlighter-rouge">&lt;office-oxml-file&gt;</code> for Microsoft Office Open XML files:</p>

<ul>
  <li><strong>Excel:</strong> .xlam, .xlsb, .xlsm, .xltm</li>
  <li><strong>PowerPoint:</strong> .potm, .ppam, .ppsm, .pptm</li>
  <li><strong>Visio:</strong> .vsdm, .vssm, .vstm</li>
  <li><strong>Word:</strong> .docm, .dotm</li>
</ul>

<p>Use <code class="language-plaintext highlighter-rouge">&lt;office-binary-file&gt;</code> for binary Microsoft Office files:</p>

<ul>
  <li><strong>Excel:</strong> .xla, .xls, .xlt</li>
  <li><strong>PowerPoint:</strong> .pot, .ppa, .pps, .ppt</li>
  <li><strong>Project:</strong> .mpp, .mpt</li>
  <li><strong>Publisher:</strong> .pub</li>
  <li><strong>Visio:</strong> .vdw, .vdx, .vsd, .vss, .vst, .vsx, .vtx</li>
  <li><strong>Word:</strong> .doc, .dot, .wiz</li>
</ul>

<p>Macro signatures apply only to the macros within the document files and are not affected by any other changes in the signed document files.</p>

<h3 id="opc-sign">&lt;opc-sign&gt;</h3>

<p>The <a href="https://en.wikipedia.org/wiki/Open_Packaging_Conventions">Open Packaging Conventions</a> (OPC) specification has its own signature format. Since OPC is the foundation for several file formats, it is not strictly a code signing format. However, code signing is used for Visual Studio Extensions (VSIX).</p>

<p>Other OPC formats include:</p>

<ul>
  <li>Open XML Paper Specification (OpenXPS)</li>
  <li>Office Open XML files (Microsoft Office)</li>
</ul>

<p>Note that while OPC signing can be applied to all OPC formats, specific applications and formats do not necessarily use or verify signatures, or even require a different signing format (case in point: NuGet packages).</p>

<p>Using <code class="language-plaintext highlighter-rouge">&lt;opc-sign&gt;</code> for Visual Studio Extensions is equivalent to using Microsoft’s <code class="language-plaintext highlighter-rouge">VSIXSignTool.exe</code>.</p>

<!-- markdownlint-enable MD026 no trailing punctuation -->

<h3 id="jar-sign">&lt;jar-sign&gt;</h3>

<p class="badge icon-signpath">Available for Basic and Enterprise subscriptions</p>

<p>This signing method can be used to sign the following file formats:</p>

<table>
  <thead>
    <tr>
      <th>Format</th>
      <th>Extensions</th>
      <th>Remarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Java archives</td>
      <td>.jar, .ear, .war</td>
      <td> </td>
    </tr>
    <tr>
      <td>Android apps und app-bundles</td>
      <td>.apk, .aab</td>
      <td>Only APK signing scheme v1 (v2 and v3 are not yet supported)</td>
    </tr>
    <tr>
      <td>ZIP files</td>
      <td>.zip</td>
      <td>Only UTF-8 encoded ZIP files are supported</td>
    </tr>
  </tbody>
</table>

<h4 id="verification">Verification</h4>

<ul>
  <li><strong>Java</strong> always verifies signatures for client components. For server components, you will need to create a policy. Please consult the documentation of your application server or <a href="https://docs.oracle.com/javase/tutorial/security/toolsign/receiver.html">Oracle’s documentation</a>.</li>
  <li><strong>Android</strong> always verifies App signatures.</li>
  <li>If you sign <strong>ZIP files</strong>, the receiver needs to manually check the signature before unpacking the file.</li>
</ul>

<p>For manual verification, use the following command (requires <a href="https://openjdk.java.net/install/">JDK</a>):</p>

<pre><code class="language-cmd">jarsigner -verify -strict &lt;file&gt;.zip
</code></pre>

<p>Add the <code class="language-plaintext highlighter-rouge">-verbose</code> option to see the certificate.</p>

<h3 id="xml-sign">&lt;xml-sign&gt;</h3>

<p class="badge icon-signpath">Available for Enterprise subscriptions</p>

<p>Sign XML files with <a href="https://www.w3.org/TR/xmldsig-core1/">XMLDSIG</a>.</p>

<p>This will create an <em>enveloped signature</em> for the entire document.</p>

<p>The result is a <code class="language-plaintext highlighter-rouge">Signature</code> element added to the root element (after all existing children) with the following properties:</p>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Value</th>
      <th>XPath</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Canonicalization</td>
      <td>Exclusive XML Canonicalization: <code class="language-plaintext highlighter-rouge">http://www.w3.org/2001/10/xml-exc-c14n#</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/CanonicalizationMethod/@Algorithm</code></td>
    </tr>
    <tr>
      <td>Signature Method</td>
      <td>RSA SHA-256: <code class="language-plaintext highlighter-rouge">http://www.w3.org/2001/04/xmldsig-more#rsa-sha256</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/SignatureMethod/@Algorithm</code></td>
    </tr>
    <tr>
      <td>ReferenceUri</td>
      <td>Whole document: <code class="language-plaintext highlighter-rouge">""</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/Reference/@URI</code></td>
    </tr>
    <tr>
      <td>Transformation</td>
      <td>Enveloped signature: <code class="language-plaintext highlighter-rouge">http://www.w3.org/2000/09/xmldsig#enveloped-signature"</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/Reference/Transforms/Transform/@Algorithm</code></td>
    </tr>
    <tr>
      <td>Transformation</td>
      <td>Exclusive XML Canonicalization: <code class="language-plaintext highlighter-rouge">http://www.w3.org/2001/10/xml-exc-c14n#</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/Reference/Transforms/Transform/@Algorithm</code></td>
    </tr>
    <tr>
      <td>Digest method</td>
      <td>SHA-256: <code class="language-plaintext highlighter-rouge">http://www.w3.org/2001/04/xmlenc#sha256</code></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/SignedInfo/Reference/DigestMethod/@Algorithm</code></td>
    </tr>
    <tr>
      <td>X.509 Certificate</td>
      <td><em>See <code class="language-plaintext highlighter-rouge">key-info-x509-data</code> option</em></td>
      <td><code class="language-plaintext highlighter-rouge">/*/Signature/KeyInfo/X509Data</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Supported options:</strong></p>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Optional</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">key-info-x509-data</code></td>
      <td>Yes</td>
      <td><code class="language-plaintext highlighter-rouge">none</code>: Do not include any X.509 data in the signature<br /> <code class="language-plaintext highlighter-rouge">leaf</code> (Default): Include only the leaf certificate in the signature<br /> <code class="language-plaintext highlighter-rouge">whole-chain</code>: Include the whole certificate chain in the signature<br /> <code class="language-plaintext highlighter-rouge">exclude-root</code>: Include the whole certificate chain in the signature, but exclude the root certificate<br /> <strong>Note</strong>: <code class="language-plaintext highlighter-rouge">whole-chain</code> and <code class="language-plaintext highlighter-rouge">exclude-root</code> only work with public CA trusted certificates</td>
    </tr>
  </tbody>
</table>

<p>See also:</p>
<ul>
  <li>Use <a href="#file-metadata-restrictions">metadata restrictions</a> for <code class="language-plaintext highlighter-rouge">&lt;xml-file&gt;</code> to restrict root element and namespace.</li>
</ul>

<h3 id="detached-raw-signatures">Detached raw signatures using &lt;create-raw-signature&gt;</h3>

<p class="badge icon-signpath">Available for Enterprise subscriptions</p>

<p>Detached raw signatures can be used for arbitrary binary or text files or <a href="/documentation/signing-containers/cosign">signing Container Images using cosign</a>. The <code class="language-plaintext highlighter-rouge">create-raw-signature</code> directive supports the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">hash-algorithm</code></td>
      <td>The hash algorithm used to calculate the signature. Supported options are <code class="language-plaintext highlighter-rouge">sha256</code>, <code class="language-plaintext highlighter-rouge">sha384</code> and <code class="language-plaintext highlighter-rouge">sha512</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rsa-padding</code></td>
      <td>Required for signing with certificates based on RSA keys. Forbidden for other key algorithms. Supported options are <code class="language-plaintext highlighter-rouge">pkcs1</code> and <code class="language-plaintext highlighter-rouge">pss</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">file-name</code></td>
      <td>Name of the output file for the detached signature.</td>
    </tr>
  </tbody>
</table>

<p><strong>Note: Due to the detached signature being placed in a separate file, <code class="language-plaintext highlighter-rouge">&lt;file&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;file-set&gt;</code> elements are only allowed inside a <a href="#zip-file-element"><code class="language-plaintext highlighter-rouge">&lt;zip-file&gt;</code></a>.</strong></p>

<h4 id="verification-1">Verification</h4>

<p>There are multiple tools and solutions that support handling of raw signature blocks. One popular option is <code class="language-plaintext highlighter-rouge">openssl dgst</code>. As the command does not support X.509 certificates, the public key has to be extracted before the signature can be verified using the following call:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl dgst <span class="nt">-verify</span> pubkey.pem <span class="nt">-signature</span> file.sig file
</code></pre></div></div>

<h2 id="using-wildcards">Using wildcards</h2>

<p>Every path attribute can contain the following wildcard patterns:</p>

<table>
  <thead>
    <tr>
      <th>Wildcard</th>
      <th>Description</th>
      <th>Example</th>
      <th>Matches</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">*</code></td>
      <td>Matches any number of any character (including none, excluding the directory separator).</td>
      <td><code class="language-plaintext highlighter-rouge">m*y</code></td>
      <td><code class="language-plaintext highlighter-rouge">my</code>, <code class="language-plaintext highlighter-rouge">mary</code>, <code class="language-plaintext highlighter-rouge">my first pony</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">?</code></td>
      <td>Matches  any single character.</td>
      <td><code class="language-plaintext highlighter-rouge">th?s</code></td>
      <td><code class="language-plaintext highlighter-rouge">this</code>, <code class="language-plaintext highlighter-rouge">th$s</code>, but not <code class="language-plaintext highlighter-rouge">ths</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">[abc]</code></td>
      <td>Matches one character given in the bracket.</td>
      <td><code class="language-plaintext highlighter-rouge">[fb]oo</code></td>
      <td><code class="language-plaintext highlighter-rouge">foo</code> and <code class="language-plaintext highlighter-rouge">boo</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">[a-z]</code></td>
      <td>Matches one character from the range given in the bracket.</td>
      <td><code class="language-plaintext highlighter-rouge">[0-9]</code></td>
      <td>all digits</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">[!abc]</code></td>
      <td>Matches one character that is not given in the bracket.</td>
      <td><code class="language-plaintext highlighter-rouge">[!f]oo</code></td>
      <td><code class="language-plaintext highlighter-rouge">boo</code> and <code class="language-plaintext highlighter-rouge">$oo</code>, but not <code class="language-plaintext highlighter-rouge">foo</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">[!a-z]</code></td>
      <td>Matches one character that is not from the range given in the bracket.</td>
      <td><code class="language-plaintext highlighter-rouge">[!0-9]</code></td>
      <td>every character that is not a digit</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">**</code></td>
      <td>Matches any number of path/directory segments. When used, they must be the only contents of the dedicated segment.</td>
      <td><code class="language-plaintext highlighter-rouge">**/*.dll</code></td>
      <td><code class="language-plaintext highlighter-rouge">*.dll</code> files in all subdirectories (recursive)</td>
    </tr>
  </tbody>
</table>

<h3 id="number-of-matches">Number of matches</h3>

<p>If wildcards are used, optional <code class="language-plaintext highlighter-rouge">max-matches</code> and <code class="language-plaintext highlighter-rouge">min-matches</code> parameters can be specified to set the number of files that may match the wildcard expression.</p>

<ul>
  <li>Both default to <code class="language-plaintext highlighter-rouge">1</code>, so wildcard expressions without <code class="language-plaintext highlighter-rouge">max-matches</code> or <code class="language-plaintext highlighter-rouge">min-matches</code> must match exactly one file</li>
  <li>Use <code class="language-plaintext highlighter-rouge">min-matches="0"</code> for optional elements (even without wildcards)</li>
  <li>Use <code class="language-plaintext highlighter-rouge">max-matches="unbounded"</code> for unlimited matches</li>
</ul>

<h2 id="file-and-directory-sets">File and directory sets</h2>

<p>If multiple files or directories should be handled in the same way, you can enumerate them using one of the following file or directory set elements: <code class="language-plaintext highlighter-rouge">&lt;directory-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;pe-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;powershell-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;windows-script-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;msi-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;cab-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;catalog-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;appx-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;msix-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;opc-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;nupkg-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;jar-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;zip-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;office-oxml-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;office-binary-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;xml-file-set&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;file-set&gt;</code></p>

<p>Each set element contains:</p>

<ul>
  <li>an <code class="language-plaintext highlighter-rouge">&lt;include&gt;</code> element for each file (or pattern) to be processed</li>
  <li>a <code class="language-plaintext highlighter-rouge">&lt;for-each&gt;</code> element that will be applied to all included elements of the set</li>
</ul>

<p>A set’s <code class="language-plaintext highlighter-rouge">&lt;for-each&gt;</code> element can include the same child elements as the corresponding simple file or directory element:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">&lt;pe-file&gt;</code> supports <code class="language-plaintext highlighter-rouge">&lt;authenticode-signing/&gt;</code></li>
  <li>therefore <code class="language-plaintext highlighter-rouge">&lt;pe-file-set&gt;</code> supports <code class="language-plaintext highlighter-rouge">&lt;authenticode-signing/&gt;</code> within the <code class="language-plaintext highlighter-rouge">&lt;for-each&gt;</code> element</li>
</ul>

<p>Sets are especially useful if your artifacts contain repeating nested structures.</p>

<h3 id="file-set-example">File set example</h3>
<table>
    <thead>
        <tr><th>

The following fragment 
</th><th>

is equivalent to 
</th></tr>
    </thead>
    <tbody><tr><td>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"first.dll"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;authenticode-sign/&gt;</span>
<span class="nt">&lt;/pe-file&gt;</span>

<span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"second.dll"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;authenticode-sign/&gt;</span>
<span class="nt">&lt;/pe-file&gt;</span>
</code></pre></div>        </div>

      </td><td>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;pe-file-set&gt;</span>
  <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"first.dll"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"second.dll"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;for-each&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/for-each&gt;</span>
<span class="nt">&lt;/pe-file-set&gt;</span>
</code></pre></div>        </div>

      </td></tr></tbody>
</table>
<h2 id="metadata-restrictions">File metadata restrictions</h2>

<p>Some element types support restricting certain metadata values.</p>

<p>The restrictions can be applied to file elements, <a href="#file-and-directory-sets">file set elements</a>, or <code class="language-plaintext highlighter-rouge">&lt;include&gt;</code> elements. Attributes on <code class="language-plaintext highlighter-rouge">&lt;include&gt;</code> elements override those on file set elements.</p>

<table>
  <thead>
    <tr>
      <th>File element</th>
      <th>Supported restriction attributes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">&lt;pe-file&gt;</code></td>
      <td>PE file headers: <code class="language-plaintext highlighter-rouge">product-name</code>, <code class="language-plaintext highlighter-rouge">product-version</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">&lt;xml-file&gt;</code></td>
      <td>Root element name and namespace: <code class="language-plaintext highlighter-rouge">root-element-name</code>, <code class="language-plaintext highlighter-rouge">root-element-namespace</code></td>
    </tr>
  </tbody>
</table>

<h3 id="example-pe-file-metadata-restriction">Example: PE file metadata restriction</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;msi-file&gt;</span>
    <span class="c">&lt;!-- requires all pe-files to have the respective attributes set --&gt;</span>
    <span class="nt">&lt;pe-file-set</span> <span class="na">product-name=</span><span class="s">"YourProductName"</span> <span class="na">product-version=</span><span class="s">"1.0.0.0"</span><span class="nt">&gt;</span> 
      <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"main.exe"</span> <span class="nt">/&gt;</span>
      <span class="c">&lt;!-- overrides the value of the parent pe-file-set --&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"resources*.resource.dll"</span> <span class="na">max-matches=</span><span class="s">"unbounded"</span> <span class="na">product-version=</span><span class="s">"1.0.1.0"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;for-each&gt;</span>
        <span class="nt">&lt;authenticode-sign</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/for-each&gt;</span>
    <span class="nt">&lt;/pe-file-set&gt;</span>
    <span class="nt">&lt;authenticode-sign</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- finally sign the MSI file --&gt;</span>
  <span class="nt">&lt;/msi-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h3 id="sbom-sample">Example: XML file schema restriction for CycloneDX SBOM</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- with this restriction, only CylconeDX 1.4 SBOM files can be signed with this artifact configuration --&gt;</span>
  <span class="nt">&lt;xml-file</span> <span class="na">root-element-namespace=</span><span class="s">"http://cyclonedx.org/schema/bom/1.4"</span> <span class="na">root-element-name=</span><span class="s">"bom"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;xml-sign/&gt;</span>
  <span class="nt">&lt;/xml-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h2 id="user-defined-parameters">User-defined parameters</h2>

<p class="badge icon-signpath">Available for Enterprise subscriptions</p>

<p>You can define parameters for each signing request. Use this to create a more restrictive artifact configuration, track values, or include build-time values.</p>

<p>Parameter values can be set when submitting a signing request via the user interface or API (see <a href="/documentation/build-system-integration#submit-a-signing-request">documentation</a>). Actual values are displayed on the signing request details page.</p>

<p>Parameters are defined in an optional <code class="language-plaintext highlighter-rouge">parameters</code> block at the beginning of the artifact configuration and can be referenced using the <code class="language-plaintext highlighter-rouge">${parameterName}</code> syntax in any XML attribute.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parameters&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">name=</span><span class="s">"version"</span> <span class="na">default-value=</span><span class="s">"1.0.0"</span> <span class="na">required=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/parameters&gt;</span>
  <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"my-installer-${version}.exe"</span> <span class="na">product-name=</span><span class="s">"myproduct"</span> <span class="na">product-version=</span><span class="s">"${version}"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h2 id="examples">Examples</h2>

<div class="panel info">
  <div class="panel-header"> Examples are shortened</div>
  <p>For the sake of clarity, all examples omit the XML prolog. A complete artifact configuration looks like this:</p>

  <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span>
<span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div>  </div>
</div>

<h3 id="predefined-configuration-for-single-portable-executable-file">Predefined configuration for single Portable Executable file</h3>

<p>This configuration works for all PE files.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pe-file&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/pe-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h3 id="signing-multiple-artifacts-in-a-zip-container">Signing multiple artifacts in a ZIP container</h3>

<p>You can sign multiple unrelated artifacts by packing them into a single ZIP file.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;zip-file&gt;</span>
    <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"app.exe"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authenticode-sign/&gt;</span>
    <span class="nt">&lt;/pe-file&gt;</span>
    <span class="nt">&lt;powershell-file</span> <span class="na">path=</span><span class="s">"setup.ps1"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authenticode-sign/&gt;</span>
    <span class="nt">&lt;/powershell-file&gt;</span>
  <span class="nt">&lt;/zip-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h3 id="msi-sample">Deep-signing an MSI installer</h3>

<p>This will sign the PE files <code class="language-plaintext highlighter-rouge">libs/common.dll</code> and <code class="language-plaintext highlighter-rouge">main.exe</code>, then re-package their MSI container and sign it too. It also restricts the name of the MSI container file.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;msi-file</span> <span class="na">path=</span><span class="s">"MyProduct.v*.msi"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"libs/common.dll"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authenticode-sign/&gt;</span>
    <span class="nt">&lt;/pe-file&gt;</span>
    <span class="nt">&lt;pe-file</span> <span class="na">path=</span><span class="s">"main.exe"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authenticode-sign/&gt;</span>
    <span class="nt">&lt;/pe-file&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/msi-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div></div>

<h3 id="signing-similar-directories-within-an-msi-file">Signing similar directories within an MSI file</h3>

<p>This artifact configuration describes an MSI installer package containing several components. The components have a similar structure and are therefore defined as a <code class="language-plaintext highlighter-rouge">&lt;directory-set&gt;</code>. Each component contains a <code class="language-plaintext highlighter-rouge">main.exe</code> and zero or more resource DLLs.</p>
<table class="noheader noborder">
    <thead>
        <tr><th>

 
</th><th>

 
</th></tr>
    </thead>
    <tbody><tr><td>

        <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;artifact-configuration</span> <span class="na">xmlns=</span><span class="s">"http://signpath.io/artifact-configuration/v1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;msi-file&gt;</span>
    <span class="nt">&lt;directory-set&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"component1"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"component2"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"component3"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;for-each&gt;</span>
        <span class="nt">&lt;pe-file-set&gt;</span>
          <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"main.exe"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;include</span> <span class="na">path=</span><span class="s">"resources/*.resource.dll"</span> 
                  <span class="na">min-matches=</span><span class="s">"0"</span> <span class="na">max-matches=</span><span class="s">"unbounded"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;for-each&gt;</span>
            <span class="nt">&lt;authenticode-sign/&gt;</span>
          <span class="nt">&lt;/for-each&gt;</span>
        <span class="nt">&lt;/pe-file-set&gt;</span>
      <span class="nt">&lt;/for-each&gt;</span>
    <span class="nt">&lt;/directory-set&gt;</span>
    <span class="nt">&lt;authenticode-sign/&gt;</span>
  <span class="nt">&lt;/msi-file&gt;</span>
<span class="nt">&lt;/artifact-configuration&gt;</span>
</code></pre></div>        </div>

      </td><td>

        <p><img src="/assets/img/resources/documentation_artifact-configuration_similar-definition.png" alt="graphical artifact configuration" /></p>
      </td></tr></tbody>
</table>

<p>Example of a directory structure that would match this configuration:</p>
<table class="noheader noborder">
    <thead>
        <tr><th>

 
</th><th>

 
</th></tr>
    </thead>
    <tbody><tr><td>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>• myapp.msi 
  • component1/
    • main.exe
    • resources/de.resource.dll
    • resources/en.resource.dll
    • resources/fr.resource.dll
  • component2/
    • main.exe
  • component3/
    • main.exe
    • resources/en.resource.dll
</code></pre></div>        </div>

        <p>(All <code class="language-plaintext highlighter-rouge">msi</code>, <code class="language-plaintext highlighter-rouge">exe</code> and <code class="language-plaintext highlighter-rouge">dll</code> files are signed with Authenticode.)</p>

      </td><td>

        <p><img src="/assets/img/resources/documentation_artifact-configuration_similar-resolved.png" alt="graphical resolved artifacts" /></p>
      </td></tr></tbody>
</table>

<p><strong>Footnotes:</strong></p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:jscript" role="doc-endnote">
      <p>Note that <a href="https://en.wikipedia.org/wiki/JScript">JScript</a> is not the same as JavaScript. While it is possible to use this option to sign JavaScript files, JavaScript engines will not be able to use this signature. <a href="#fnref:jscript" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

		</article>
	</div>
</section><!-- last_modified_at:  --><section class='bg-dark-grey font-white newsletter' id="newsletter">
	<div>
		<h2>Sign up for news and special offers</h2>
		<form class="ml-block-form" action="https://app.mailerlite.com/webforms/submit/d7c3i1" data-code="d7c3i1" method="post">
			<input type="text" class="form-control" data-inputmask="" name="fields[name]" value="" placeholder="Name">
			<input type="email" class="form-control" data-inputmask="" name="fields[email]" value="" placeholder="Email">
			<input type="hidden" name="ml-submit" value="1">
			<button type="submit" class="btn btn-secondary newsletter">Subscribe</button>
		</form>
	</div>
</section>
</main>
  <footer>
  	<div>
	  	<div>
	  		<img src='/assets/signpath-logo-white.svg' width="334" height="67" alt='SignPath'/>
	  		<svg viewBox="0 0 244 18">
			  <text x="0" y="15">CODE SIGNING SIMPLE &amp; SECURE</text>
			</svg>
	  		<div>
				<a target="_blank" href="https://www.linkedin.com/company/33243108" rel="noopener noreferrer">
<svg class="icon footer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="currentColor"  d="M 8.6425781 4 C 7.1835781 4 6 5.181625 6 6.640625 C 6 8.099625 7.182625 9.3085938 8.640625 9.3085938 C 10.098625 9.3085938 11.283203 8.099625 11.283203 6.640625 C 11.283203 5.182625 10.101578 4 8.6425781 4 z M 21.535156 11 C 19.316156 11 18.0465 12.160453 17.4375 13.314453 L 17.373047 13.314453 L 17.373047 11.310547 L 13 11.310547 L 13 26 L 17.556641 26 L 17.556641 18.728516 C 17.556641 16.812516 17.701266 14.960938 20.072266 14.960938 C 22.409266 14.960937 22.443359 17.145609 22.443359 18.849609 L 22.443359 26 L 26.994141 26 L 27 26 L 27 17.931641 C 27 13.983641 26.151156 11 21.535156 11 z M 6.3632812 11.310547 L 6.3632812 26 L 10.923828 26 L 10.923828 11.310547 L 6.3632812 11.310547 z"/></svg></a>
				&nbsp;&nbsp;
				<a target="_blank" href="mailto:info@signpath.io" rel="noopener noreferrer"><svg class="icon footer" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="currentColor" d="M 3 8 L 3 26 L 29 26 L 29 8 Z M 7.3125 10 L 24.6875 10 L 16 15.78125 Z M 5 10.875 L 15.4375 17.84375 L 16 18.1875 L 16.5625 17.84375 L 27 10.875 L 27 24 L 5 24 Z"/></svg>
</div>
	  	</div>
	  	<div>
	  		<a href='/privacy-policy'>Privacy Policy</a>
	  		<a href='/terms-of-service'>Terms of Service</a>
	  		<a href='/status'><span style="color: lightgreen;"><svg class="icon small" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="currentColor" d="M 28.28125 6.28125 L 11 23.5625 L 3.71875 16.28125 L 2.28125 17.71875 L 10.28125 25.71875 L 11 26.40625 L 11.71875 25.71875 L 29.71875 7.71875 Z"/></svg>
</span>Status
			</a>
	  	</div>
	</div>
  </footer>
        <div id='cookie-info'>
            <h3>Cookie settings</h3>
            <div class="container">
                <span>We use cookies to enhance your browsing experience.</span>
                <p class="mobile show-more active"><a>Show more information</a></p>
                <p class="mobile show-less"><a>Show less information</a></p>
                <span class="information">By clicking the “Accept” button below, you agree that non-essential cookies on our website may be used by us and by third parties, some of them located in the USA. Learn more about our cookies in our <a
                            href='/privacy-policy'>Privacy
					Policy</a>
                </span>
				<div class="actions">
					<button class='btn btn-primary' id='acknowledge-cookies-btn'>Accept</button>
					<button class="btn btn-grey" id='refuse-cookies-btn'>Refuse</button>
				</div>
            </div>
			<script>
				const queryString = window.location.search;
				const urlParams = new URLSearchParams(queryString);
				const adgroupid = urlParams.get('adgroupid') ? urlParams.get('adgroupid') : document.cookie.match('(^|;)\\s*' + 'adgroupid' + '\\s*=\\s*([^;]+)')?.pop() || ''

				if (adgroupid) {
					const els_trial = document.querySelectorAll("a[href='" + window.location.protocol + '//' + window.location.hostname + '/Web/Subscription/StartFreeTrial' + "']")
					const els_login = document.querySelectorAll("a[href='" + window.location.protocol + '//' + window.location.hostname + '/Web/Home/Login' + "']");

					for (let child of els_trial) {
						if (child.tagName === 'A') {
							child.href = child.href + '?websiteCorrelationId=' + adgroupid
						}
					}

					for (let child of els_login) {
						if (child.tagName === 'A') {
							child.href = child.href + '?websiteCorrelationId=' + adgroupid
						}
					}
				}
			</script>
		</div>
	</footer>
</body>
</html>
